<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Táº£i lÃªn áº£nh/video</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light text-center p-4">
    <h2 class="mb-4">ğŸ“¤ Táº£i lÃªn áº£nh hoáº·c video</h2>

    <input type="file" id="fileInput" class="form-control mb-3" accept="image/*,video/*">
    <button id="uploadBtn" class="btn btn-primary">Táº£i lÃªn</button>

    <div class="progress mt-3" style="height: 25px;">
        <div id="progressBar" class="progress-bar progress-bar-striped bg-success" style="width: 0%">0%</div>
    </div>

    <a href="/gallery" class="btn btn-link mt-4">Xem thÆ° viá»‡n</a>

    <script>
        const btn = document.getElementById("uploadBtn");
        const input = document.getElementById("fileInput");
        const bar = document.getElementById("progressBar");

        btn.onclick = async () => {
            const file = input.files[0];
            if (!file) return alert("Chá»n file trÆ°á»›c!");

            const formData = new FormData();
            formData.append("file", file);

            const xhr = new XMLHttpRequest();
            xhr.open("POST", "/upload");
            xhr.upload.onprogress = e => {
                if (e.lengthComputable) {
                    const percent = Math.round((e.loaded / e.total) * 100);
                    bar.style.width = percent + "%";
                    bar.innerText = percent + "%";
                }
            };
            xhr.onload = () => {
                if (xhr.status === 200) alert("Táº£i lÃªn thÃ nh cÃ´ng!");
                else alert("Lá»—i táº£i lÃªn!");
            };
            xhr.send(formData);
        };
    </script>
</body>
</html>
